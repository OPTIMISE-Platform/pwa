<!--
  ~ Copyright 2022 InfAI (CC SES)
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<div class="container" #container fxLayout="column" (touchstart)="onTouchAdd($event)" (touchmove)="onTouchAdd($event)"
     (touchend)="onTouchEnd($event)" (touchcancel)="onTouchCancel()">
  <mat-card class="card mat-elevation-z4">
    <mat-card-header>
      <div class="status-icon">
        <mat-icon *ngIf="state?.device?.annotations?.connected === false" matTooltip="Offline">cloud_off</mat-icon>
        <mat-icon *ngIf="state?.device?.annotations?.connected === true" matTooltip="Online">wifi</mat-icon>
        <mat-icon *ngIf="state?.device?.annotations?.connected === undefined" matTooltip="Status unknown">
          question_mark
        </mat-icon>
      </div>

      <mat-card-title>
        {{state?.device?.name}}

      </mat-card-title>
      <mat-card-subtitle>{{deviceTypeClass?.name}}</mat-card-subtitle>
      <mat-card-subtitle>{{deviceType?.name}}</mat-card-subtitle>
      <img mat-card-avatar src="{{deviceTypeClass?.image || 'assets/icons/icon-512x512.png'}}"
           alt="Icon of the device type class">

    </mat-card-header>
    <mat-card-content>
      <mat-list>
        <h3 matSubheader>Actions</h3>
        <!-- TODO-->

        <h3 matSubheader>Status</h3>

        <mat-list-item *ngFor="let on of (state?.device?.onOffStates || []); let i = index">
          <span>On/Off</span>
          <span *ngIf="(state?.device?.onOffStates || []).length == 1" fxFlex></span>
          <span *ngIf="(state?.device?.onOffStates || []).length > 1"
                fxFlex class="service-name">{{state!.device!.getOnOffServices[i].name}}</span>
          <button mat-icon-button disabled>
            <mat-icon [ngClass]="{'red': !on, 'green': on}">offline_bolt</mat-icon>
          </button>
        </mat-list-item>


      </mat-list>

    </mat-card-content>
    <div class="back-button-container">
      <button mat-icon-button (click)="toList()" class="back-button">
        <mat-icon color="accent">expand_less</mat-icon>
      </button>
    </div>
  </mat-card>
</div>
